### 心理生理数据在玩家体验评价中的定量研究：通过机器学习在恐怖游戏中分类情绪的方法

> v1.0  2020-12-8
>
> v1.1 2020-12-29	2021-1-1 2020-1-4

#### ABSTRACT

游戏行业和游戏市场的规模日渐庞大的当下。玩家在进行游戏体验时，游戏的可玩性体现的至关重要。本文提出一种分析方法，通过在完整游戏流程中进行心理生理数据收集，然后利用机器学习LSTM方法，对每位玩家的特定情绪与生理数据进行学习来产生相关性。从而在完整游戏流程中，对玩家的生理数据进行基于特定情绪的分类，则可量化出在风格化游戏内玩家特定情绪的产生时刻和持续时长，以便让游戏设计者更精确的对玩家的情绪调动进行分析。另一方面，用每个参与者产生的特定情绪的生理数据，结合其在游戏结束后的体验评分问卷 ，统计分析出某些阶段的情绪调动对体验评分的相关性如何。最终开发人员利用此方法使游戏设计量化可控。从而提升游戏质量。

#### 1 介绍 INTRODUCTION

在游戏行业中，玩家在游戏中的体验的至关重要，而对于游戏开发者而言，可以在游戏开发中期或后期对游戏的可玩性进行针对性的调整就非常有意义。目前用户体验评估方法主要还是依靠访谈，问卷调查等形式[1]。但是这些方法很难在游戏过程中实时的进行，不然会打破游戏的沉浸感和连续性。相反使用心理生理数据则可以客观实时反映玩家的体验情况[9]。同时在当下，利用机器学习的方法对玩家体验问卷报告与其多种生理数据相关性建模已成为可能[2]。但结果为导向的相关性建模无法为游戏后期调整提出方向性指引。我们提出一个方法，在完整而连续的游戏流程中，通过机器学习使校准阶段（游戏中的intro阶段）的生理数据和特定情绪产生相关性，随后在正式的（游戏中的regular阶段）游戏时长中，基于特定情绪对玩家的生理数据分类。这样可以验证游戏中设计的情节对玩家产生特定情感变化的情况。其中包含特定情感的激活时刻和消逝时刻。我们还做了额外一个工作，最终我们对每位参与者进行了一个游戏体验评分问卷，然后通过统计分析，可以得到相关情节产生的情感对游戏最终可玩性评分的权重比。

#### 2 相关工作 RELATED WORK

- 2.1 风格化游戏

  虚拟现实设备现如今越来越成熟。当下以此设备为基础下的游戏应用对玩家体验的研究也有非常多。因为虚拟现实环境能够在用户中创造出有针对性的情绪，如快乐和恐惧。研究还发现，虚拟现实能够让人们对虚拟角色产生共鸣 [5]，相关的研究也有：

  - Rogers通过恐怖冒险游戏《Ethan Carter的消失》研究了VR中游戏音频感知对玩家体验的影响。
  - Wilson和McGill比较了用户在VR上玩恐怖视频游戏《生化危机7》的体验会在比电视上带来更高的presence。

  同时，不难发现这些研究都基于恐怖或惊悚类游戏，因为紧张和恐怖类型的游戏会让体验者的心理生理指标产生非常强烈的变化[11]。

  我们在实验前期，已进行虚拟现实设备和通用显示器设备两种方式的尝试，因为在虚拟现实设备交互中，参与者会有幅度较大的自主运动，从而导致生理数据的不稳定和严重的噪声，甚至是错误。故最终我们还是选择了传统显示器游戏的体验方式。同时在近期Peng的探索性实验中认为，恐怖或惊悚类游戏在VR设备和传统显示器交互下相比提升的体验感并不是很多，而是带给玩家许多积极的情感体验（positive emotional experiences）[7]

- 2.2 心理生理指标和玩家体验

  我们得知在心里生理学上，研究人员可以使用多种心理生理学反馈设备，如皮肤电导(SC)、心电图(ECG)、心率（HR）、脑电（EEG）、肌肉电（EMG）来检测用户在某些体验时的情感状态。其主要优点是信号可以被实时记录，不会受到参与者的偏见，同时记录设备在一定程度上不会干扰参与者的自然行为。心理生理测量的另一个优点是它可以检测到非常敏感的反应，相关综述中更详细的进行了讨论[3]。

  - ECG、HR和HRV  [2] [3]
    - HR则用于测量情感、亲和力和注意力上的唤起（arousal in emotion，likeability，attention）；
    - HRV与压力或激活相关
    - ECG可以得到HR和HRV；
  - GSR [3] [9]
    - 乐趣与GSR显著相关，皮肤电导已经被发现有一个线性变化的性质相对于情绪唤起。
    - 区分恐惧和生气（It has been used to classify different states such as anger and fear）

  在用户体验和生理指标相关性的研究中，有学者在实时视频对话的应用中发现，大多数受试者没有注意到视频质量的差异，这表明心理生理测量方法能够挖掘传统用户体验测量方法无法发现的潜在事实[3]（Most of the subjects didn’t notice the difference in video quality, which indicates that psychophysiological measure has the capability to mine the underlying fact that cannot be found using traditional methods of measuring user experience[124]）

  在最近又有学者通过脑电仪，胸带，指尖的GSR传感器获得的心理生理数据与与玩家的自我报告结合起来，从而创建一个基于机器学习的玩家享受模型。一个训练有素的模型可以让游戏开发者在不需要问卷调查的情况下获得关于玩家在特定游戏事件中的情绪的高质量数据[2]

  本文经过前期的实验发现，过多的生理数据不但会影响数据分析，还会让采集数据时的实验设备非常繁重，影响玩家体验。但是单一的生理数据又有局限性，导致对特定情感的拟合不准确。本文在实验时仅用了BVP和GSR数据可以作为相关数据样本。同时，作为时序上对连续生理型号的回归和分类，==我们选用了LSTM的RNN算法进行学习分析==。（需要说为什么）

#### 3 实验和建模 Experiments & Modeling

- 3.1系统环境 SYSTEM

  - 3.1.1所需硬件设备

    本次实验用到的硬件环境PC台式机，配置为NVIDIA RTX 2060，16G内存，AMD Ryzen3600，一副降噪耳机作为声音的输出设备。

    生理数据的检测和收集在实验之初有两个备选方案：一个是使用 E4 wristband 设备，另一个是利用生理数据传感器和单片机的自制设备，但是经过前期实验，由于E4设备在使用时会偶发掉线，导致数据不连续，所以我们发现自制设备是最优选择。

  - 3.1.2游戏类型

    实验用到的游戏是我们用Unity 开发的一款单人恐怖类型的游戏。相比于其他类型的游戏元素（如：愉悦感，幸福感），恐怖元素对于玩家的情感调动更为强烈，同时在实验过程中的生理数据能有显著的变化[11] [12]。在恐怖游戏中，通过精心设计的画面和声音，可以获得足够高区分度的玩家情绪反应，这些剧烈的情绪反应可以通过生理数据客观的表现出来，并且通过传感器有效的获取。

- 3.2 参与者情况

  - 参与者的描述

    我们对20个参与者进行了实验，其中男生7人，女生13人。年龄介于20到22岁，其中有一个人26岁。他们都对电子游戏感兴趣，其中50%的参与者几乎没有恐怖游戏的经验，40%的参与者偶尔会尝试恐怖游戏，剩下的参与者会经常体验恐怖游戏。

  - 是否有自身的生理或情绪的问题
    - 提前掌握参与者自述身体情况，例如是否是高血压或心脏问题，这些是必要的，且也是参与者的隐私，研究人员和参与者会达成隐私保护的协议。
    - 提醒参与者，如果在实验当中对体验内容或者身体的不适，要通知研究人员。
    
  - 是否抵触实验和游戏

    - 告诉参与者要如是回答和尽可能准确的回答游戏体验结束后的问卷。
    - 同时告诉参与者，所参与体验的游戏是具体的类型和操作方式，并提醒参与者要尽可能的完成整个游戏流程，在游戏过程中，研究人员不再给予参与者提示。
    
  - 设备的佩戴

    - 对于不同性别的参与者，我们会由同性别的研究人员为其佩戴生理传感器设备。同时需要告知参与人员，避免大幅度的动作和左右手相互接触，这样会导致ECG信号错误。

- 3.3 数据收集
  
  - 游戏设计者给予的时间戳记录
    - 从游戏启动后进行首个过场时，我们称为校准阶段，通过经历一段平和情绪校准后，紧接着通过一个突兀的声音和画面组成的jump scare，对玩家进行一个惊悚情绪的校准。此处的校准生理数值会成为后续用于LTSM机器学习分类特定情绪的样本库。同时我们将校准阶段和游戏阶段整合在我们自定义的游戏中，更符合完整的游戏流程体验的。
    - 在开始后正式进行游戏时，设计者添加预计可以给玩家带来特定情绪的标签，例如：光源的变化 ，环境声音的变化，或是面对敌人的威胁等，就会加一个“恐惧”的标签。当玩家在明亮的区域内，背景音乐安全舒缓，应加一个“正常”的标签。注意，对于游戏整体故事架构上给人带来的心理思考后的恐惧（细思极恐），不是本文的调研范围。
  - 完整游戏流程中的生理数据ECG，GSR的记录
    - 测试人员需要在一个安静的环境，减少外界因素对体验的影响。
    - 基于电位差的ECG传感器收集的生理数据，会有信号的噪音，但对于小幅运动的准确率抗性较好，同时GSR数据信号也有这个问题（hand placement is sometimes found to be inconvenient and the placement also distorts the signal when a person is moving）[3]，所以，我们需要用尼龙绷带将电极与玩家指尖绑住，使之牢牢接触。
    - 我们为ECG和GSR传感器开发一个对数据实时监视、采集和保存的APP。[有图]
  - ==体验后玩家调查问卷内容==
    
    - 问卷我们采用基于李斯特五量表的主观问卷（表1）和最终的自我评估模型(SAM)（1~9 scales）[10]，我们设计的反馈量表如下：
    
      |  ID  |                             问题                             | Very Weak | Weak | Normal | Strong | Very Strong |
      | :--: | :----------------------------------------------------------: | --------- | ---- | ------ | ------ | ----------- |
      |  1   |       在主菜单出来前的过场Intro中感觉被惊吓的程度如何?       |           |      |        |        |             |
      |  2   | 在游戏正式开始后体验到恐惧的程度是如何的?（不包括之前的Intro） |           |      |        |        |             |
      |  3   |          在游戏中情节1进入时，你体验到的恐怖程度是           |           |      |        |        |             |
    |  4   |          在游戏中情节2进入时，你体验到的恐怖程度是           |           |      |        |        |             |
      |  5   |          在游戏中情节3进入时，你体验到的恐怖程度是           |           |      |        |        |             |
      |  6   |          在游戏中情节4进入时，你体验到的恐怖程度是           |           |      |        |        |             |
      |  7   |                      感觉到游戏好玩么？                      |           |      |        |        |             |
      
  
- 3.4 数据处理

  - 丢失数据的弥补
    - 对于生理数据采集，该设备的采集频率为64Hz，如果发生了某一时刻的数据丢失，我们会以此时刻的前后时刻数值的平均值  $v_{t1} = (v_{t0} + v_{t2}) * 0.5$，弥补成为丢失时刻的数据（传感设备和PC通过蓝牙近距离传输数据，几乎没有数据丢失）
  - 预处理数据
    - 校准数据的处理，校验数据分为2个部分。记录平静情绪时的生理数值7s，恐惧情绪时的生理数值7s。我们会以2s时间长度切分为一个特征的训练集（2秒内有128个特征数值），一段校准数据集的时间长度7s内，可以切分出5组数据集 $SetNum_c = T_c - T_s$ 。
    - 对于平静情绪，我们可以看作为是基准0值，恐惧情绪，我们可以看作为是变化值。激素反应是情绪反应三个成分之一，在应激反应下自主神经反应和激素反应处于分解代谢过程。而恐惧情绪是产生洽是因为外界刺激产生，属于应激状态下的一种[8]。那么在恐惧感产生后的时间段内，也会混杂进一些平静情绪的生理值，所以我们会在后期进行两次机器学习后，进行排除。

- 3.5 机器学习

  - 采用which方法，why？LSTM

    - …………*TODO*…………
  
  - 首先通过对恐惧情绪样本的训练，然后在完整游戏时长的数据中得到恐惧情绪的时间长度集合，然后我们通过标记法，将重叠的恐惧时长部分不被重复统计。这样会得到时间长度集 ，例如：
    $$
    L_{horror} = \{L_{(0,7)},L_{(10,23)}...L_{(n,m)}\}\\
    L_{(n,m)} = \{t_n,t_{n+1},...,t_m\}
    $$
    
  - 然后通过对平静情绪样本的训练，在完整游戏时长的数据中得到平静情绪的时间长度集合，同上一步，我们也会得到一个平静时间的长度集： $ L_{normal} = \{L_{(6,10)},L_{(19,30)}...L_{(n,m)}\}\\ $ ，接下来，我们进行一个相对补集，得到最终的恐惧时长 $L = L_{horror} - L_{normal}$
  

#### 4 结果和讨论 RESULTS & DISCUSSION

- 数据是什么，相关说明
  - 问卷调查的统计结果，ANOVA进行分析
    - SAM的最终的结果：…………*TODO*…………
    - 自定义问卷量表的结果：…………*TODO*…………
  - 对于单个玩家，他们的特定情绪在完整游戏体验中的情况
    - …………*TODO*…………
  - 综合所有玩家的特定情绪在完整游戏中的情况，分析某个阶段的特定情绪与体验结果的相关性。
    - …………*TODO*…………
- 谈谈参与者的相关问题
  - …………*TODO*…………
- 谈谈游戏生理数据收集时候的问题
  - 对于校准阶段，<u>对于时间片段集的切分选用的2sec的长度值</u>，我们是只是经过测试而发现，这样的时间可以更有利于机器学习样本集的划分，使其更好的进行学习。
  - 本文所使用的自制收集玩家生理数据的设备，由于客观存在的问题，无法有效获得稳定数据。在将来工作中，我们期待测量硬件可以更加成熟和便捷，使得本文提出的模型，可以获得精度更高的参数。

#### 5  CONCLUSION & FUTURE WORK

本文提出了一种使用机器学习，对玩家生理数据、游戏数据以及心理调查问卷评分进行建模的方法。通过该模型，可以有效获得特定情绪持续时长信息。为了验证本方法的有效性，我们开发了一个恐怖游戏的Demo，通过实验手段进行了验证。从实验数据的分析结果来看，本文方法能够，在完整的游戏流程体验周期中，对XX个体验者进行生理数据的收集和体验结束后的调查问卷。我们想通过这样一个方式方法应用到更为通用的游戏当中，因为在游戏开发中后期，调整游戏情节的情感带动，验证游戏设计者的设计目的，是非常重要且有意义的。

接下来通过机器学习对完整游戏流中事先设定好的校准阶段是数据样本进行学习，然后在后续连续时间内的对情感体验分类，我们可以看出……TODO……，对于非入侵样式的设备采集到的生理数据样本，BVP和GSR已经可以客观的表现出参与者在游戏体验中的……TODO……。这样从游戏设计者的视角中，可以定量的分析出……TODO……。与此同时，我们还可以得知，再某些特定的游戏中，情感的持续时间的占比和游戏的体验度的关系是……TODO……。

将来可以通过本文的研究思路和方法，应用在其他游戏中进行验证，从而得到更为通用的数据模型。然后我们可通更多维度的生理数据的测量收集，量化分析哪些相关的生理数据维度，可以用来更加精准的分类玩家的心理活动情感变化。最后，因为玩家的情绪是可以影响其在游戏中的表现，那么通过记录游戏内数据，使其与生理结果通过机器学习产生相关性建模，进行更进一步的实验，这样优势在于从更易得的游戏数据中得到生理数据的推测和最终游戏体验值会更加容易。

#### References

1. Game User Experience Evaluation; Springer: Berlin/Heidelberg, Germany, 2015.
2. Psychophysiological Indicators for Modeling User Experience in Interactive Digital Entertainment. 2019, 19(5):989.
3. A Survey on Psycho-Physiological Analysis & Measurement Methods in Multimodal Systems. 2019, 3(2)
4. Effects of voluntary heart rate control on user engagement and agency in a virtual reality game. 2020, :1-17.
5. Effects of Manipulating Physiological Feedback in Immersive Virtual Environments. 2018, :101-111.
6. Emotional State and Cognitive Load Analysis using Features from BVP
7. Beyond Horror and Fear: Exploring Player Experience Invoked by Emotional Challenge in VR Games
8. Foundations of Behavioral Neuroscience 
9. A review of the use of psychophysiological methods in game research
10. Margaret M Bradley and Peter J Lang. 1994. Measuring emotion: the self-assessment manikin and the semantic differential. Journal of behavior therapy and experimental psychiatry 25, 1 (1994), 49–59
11. Vanishing scares biofeedback modulation of affective player experiences in a procedural horror game
12. Please Biofeed the Zombies: Enhancing the Gameplay and Display of a Horror Game Using Biofeedback
13. Fear as a Biofeedback Game Mechanic in Virtual Reality: Effects on Engagement and Perceived Usability

